<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>jQuery on Footer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="styles/main.css" />
    <script type="text/javascript" src="../dist/fastready.min.js"></script>
</head>
<body>
    <main style="display:none">
        <h1>jQuery on Footer</h1>
        <!-- Generated page body starts here -->
        <p>On this example, let's suppose this page was generated by a CMS. Knowing this:</p>
        <ul>
            <li>Our jQuery (along with other libraries) are being loaded in the footer, with only extremely essential ones being at the top of page.</li>
            <li>We have some jQuery that has been added to the body of the page and needs to be called as soon as possible.</li>
            <li>We can't move jQuery or any other library to the top.</li>
        </ul>
        <p>How fastready.js can help on this case? Since it's keeping track of the document as it loads, we don't need to worry about where jQuery is inside the page. We can simply ask fastready.js to callback to us when it loads!</p>
        <div id="hidden" style="display:none">
            <p>
                This page is a great example of it in action!<br />
                Take a look at it's source-code and have a surprise :)
            </p>
        </div>
        <script type="text/javascript">
        // Will be called when the script is ready (element has been found), but not loaded yet
        fastready('#jquery').on('#ready', (jquery) => {
            console.log('jQuery is ready, but not loaded.');
            
            // Will be called when the script has loaded
            jquery.onload = () => {
                console.log('jQuery is now loaded.');
                $('main').show();
            }
        });

        // All this mess above can be prevented by using onLoad in place of on:
        fastready('#jquery').onLoad('#ready', () => {
            console.log('jQuery is ready and loaded. Debugging:', window.jQuery);
            $('#hidden').show();
        });
        </script>
        <!-- Generated page body ends here -->
    </main>

    <!-- This is when we load jQuery. We need to assign it an id so we can query for it. -->
    <script id="jquery" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet" />
</body>
</html>